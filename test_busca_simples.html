<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Busca Simples</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h2>Teste de Busca Simples</h2>
        
        <!-- Campo de busca -->
        <div class="row mb-3">
            <div class="col-md-6">
                <div class="input-group">
                    <span class="input-group-text bg-light">
                        <i class="fas fa-search text-primary"></i>
                    </span>
                    <input type="text" 
                           id="filtroBusca" 
                           class="form-control" 
                           placeholder="Digite o nome do aluno para buscar...">
                    <button class="btn btn-outline-secondary" type="button" id="limparBusca">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="col-md-6">
                <div class="d-flex align-items-center">
                    <span class="text-muted me-2">
                        <i class="fas fa-info-circle"></i>
                        <small>Resultados: <span id="totalResultados">0</span></small>
                    </span>
                </div>
            </div>
        </div>

        <!-- Tabela de teste -->
        <div class="table-responsive">
            <table class="table table-hover table-striped" id="tabelaAlunos">
                <thead class="table-dark">
                    <tr>
                        <th>Nome</th>
                        <th>Telefone</th>
                        <th>Atividade</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>José Silva</td>
                        <td>(11) 99999-9999</td>
                        <td>Musculação</td>
                        <td><button class="btn btn-sm btn-primary">Editar</button></td>
                    </tr>
                    <tr>
                        <td>Maria Santos</td>
                        <td>(11) 88888-8888</td>
                        <td>Yoga</td>
                        <td><button class="btn btn-sm btn-primary">Editar</button></td>
                    </tr>
                    <tr>
                        <td>João Oliveira</td>
                        <td>(11) 77777-7777</td>
                        <td>Musculação</td>
                        <td><button class="btn btn-sm btn-primary">Editar</button></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Log de debug -->
        <div class="mt-4">
            <h4>Log de Debug:</h4>
            <div id="debugLog" style="background: #f8f9fa; padding: 10px; border-radius: 5px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto;"></div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            $('#debugLog').append(`[${timestamp}] ${message}<br>`);
            console.log(message);
        }

        $(document).ready(function() {
            log('Script carregado');
            
            const $filtroBusca = $('#filtroBusca');
            const $limparBusca = $('#limparBusca');
            const $totalResultados = $('#totalResultados');
            const $tbody = $('#tabelaAlunos tbody');
            
            log('Elementos encontrados:');
            log(`- filtroBusca: ${$filtroBusca.length}`);
            log(`- limparBusca: ${$limparBusca.length}`);
            log(`- totalResultados: ${$totalResultados.length}`);
            log(`- tbody: ${$tbody.length}`);
            
            // Teste de evento de input
            $filtroBusca.on('input', function() {
                const valor = $(this).val();
                log(`Input detectado: "${valor}"`);
                
                // Simular busca local
                const termo = valor.toLowerCase();
                const $linhas = $tbody.find('tr');
                let encontrados = 0;
                
                $linhas.each(function() {
                    const nome = $(this).find('td:first').text().toLowerCase();
                    if (nome.includes(termo)) {
                        $(this).show();
                        encontrados++;
                    } else {
                        $(this).hide();
                    }
                });
                
                $totalResultados.text(encontrados);
                log(`Busca concluída: ${encontrados} alunos encontrados`);
            });
            
            // Teste do botão limpar
            $limparBusca.on('click', function() {
                log('Botão limpar clicado');
                $filtroBusca.val('');
                $tbody.find('tr').show();
                $totalResultados.text($tbody.find('tr').length);
                log('Busca limpa');
            });
            
            // Inicializar contador
            $totalResultados.text($tbody.find('tr').length);
            log('Teste inicializado com sucesso');
        });
    </script>
</body>
</html>
