<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ficha de Cadastro - {{ aluno.nome }} - Associa√ß√£o Amigo do Povo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            font-size: 12px;
            line-height: 1.2;
            color: #000;
            background: white;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border: 1px solid #000;
            padding: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
            border-bottom: 1px solid #000;
            padding-bottom: 15px;
        }

        .header-left {
            flex: 1;
        }

        .logo {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }

        .logo-icon {
            width: 30px;
            height: 30px;
            background: #007bff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
        }

        .logo-icon::before {
            content: '‚òÖ';
            color: white;
            font-size: 16px;
        }

        .organization-name {
            font-size: 14px;
            font-weight: bold;
            color: #007bff;
        }

        .form-title {
            font-size: 12px;
            font-weight: bold;
            color: #000;
            margin-top: 3px;
        }

        .photo-section {
            width: 120px;
            height: 160px;
            border: 2px solid #333;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f9f9f9;
            font-size: 12px;
            color: #666;
            text-align: center;
        }
        
        .photo-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .photo-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }

        .section-title {
            font-size: 12px;
            font-weight: bold;
            color: #007bff;
            margin: 15px 0 8px 0;
            display: flex;
            align-items: center;
        }

        .section-title .icon {
            margin-right: 5px;
        }

        .form-row {
            display: flex;
            margin-bottom: 8px;
            align-items: center;
        }

        .form-label {
            font-size: 11px;
            font-weight: normal;
            color: #000;
            width: 120px;
            flex-shrink: 0;
        }

        .form-input {
            flex: 1;
            border: none;
            border-bottom: 1px solid #ccc;
            padding: 2px 5px;
            font-size: 11px;
            background: transparent;
            margin-right: 20px;
        }

        .form-input:focus {
            outline: none;
            border-bottom: 1px solid #007bff;
        }

        .form-row-double {
            display: flex;
            margin-bottom: 8px;
        }
        
        .form-row-triple {
            display: flex;
            gap: 15px;
            margin-bottom: 8px;
        }
        
        .form-row-triple .form-group {
            flex: 1;
        }

        .form-group {
            display: flex;
            align-items: center;
            flex: 1;
            margin-right: 20px;
        }

        .form-group:last-child {
            margin-right: 0;
        }

        .form-group .form-label {
            width: 80px;
        }

        .form-group .form-input {
            margin-right: 0;
        }

        .select-row {
            display: flex;
            margin-bottom: 8px;
            align-items: center;
        }

        .select-label {
            font-size: 11px;
            font-weight: normal;
            color: #000;
            margin-right: 10px;
        }

        .select-input {
            border: none;
            border-bottom: 1px solid #ccc;
            padding: 2px 5px;
            font-size: 11px;
            background: transparent;
            margin-right: 20px;
            min-width: 120px;
        }

        .status-badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 10px;
            font-weight: bold;
        }

        .status-ativo {
            background: #d4edda;
            color: #155724;
        }

        .status-inativo {
            background: #f8d7da;
            color: #721c24;
        }

        .no-print {
            margin-bottom: 15px;
        }

        .btn {
            display: inline-block;
            padding: 8px 15px;
            margin-right: 10px;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 3px;
            border: none;
            cursor: pointer;
            font-size: 12px;
        }

        .btn:hover {
            background: #0056b3;
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-secondary:hover {
            background: #545b62;
        }

        @media print {
            * {
                -webkit-print-color-adjust: exact !important;
                color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
            
            body {
                padding: 10px;
                font-size: 10px;
                background: white !important;
                color: black !important;
                margin: 0;
            }

            .container {
                max-width: 100%;
                border: 1px solid #000;
                padding: 15px;
                margin: 0;
                background: white !important;
                box-shadow: none !important;
            }

            .no-print {
                display: none !important;
                visibility: hidden !important;
            }

            .header {
                margin-bottom: 15px;
                padding-bottom: 10px;
            }

            .organization-name {
                font-size: 12px;
            }

            .form-title {
                font-size: 10px;
            }

            .photo-section {
                width: 60px;
                height: 80px;
                font-size: 8px;
            }

            .section-title {
                font-size: 10px;
                margin: 10px 0 5px 0;
            }

            .form-label {
                font-size: 9px;
                width: 100px;
            }

            .form-input {
                font-size: 9px;
            }

            .form-group .form-label {
                width: 70px;
            }

            .select-label {
                font-size: 9px;
            }

            .select-input {
                font-size: 9px;
                min-width: 100px;
            }
        }
    </style>
</head>
<body>
    <!-- Bot√µes de controle (n√£o aparecem na impress√£o) -->
    <div class="no-print">
        <a href="javascript:history.back()" class="btn btn-secondary">
            ‚Üê Voltar
        </a>
        <button onclick="imprimirFicha()" class="btn">
            üñ®Ô∏è Imprimir
        </button>
    </div>

    <div class="container">
        <!-- Cabe√ßalho -->
        <div class="header">
            <div class="header-left">
                <div class="logo">
                    <div class="logo-icon"></div>
                    <div>
                        <div class="organization-name">Associa√ß√£o Amigo do Povo</div>
                    </div>
                </div>
                <div class="form-title">üìã Dados do Aluno</div>
            </div>
            <div class="photo-section">
            {% if aluno.foto %}
                <img src="{{ url_for('static', filename='fotos/' + aluno.foto) }}" alt="Foto do aluno" class="photo-image">
            {% else %}
                <div class="photo-placeholder">
                    <span>FOTO 3x4</span>
                </div>
            {% endif %}
        </div>
        </div>

        <!-- Informa√ß√µes Pessoais -->
        <div class="section-title">
            <span class="icon">üë§</span> Informa√ß√µes Pessoais
        </div>
        
        <div class="form-row">
            <label class="form-label">Nome Completo *</label>
            <input type="text" class="form-input" value="{{ aluno.nome or '' }}" readonly>
        </div>
        
        <div class="form-row-double">
            <div class="form-group">
                <label class="form-label">Data de Nascimento *</label>
                <input type="text" class="form-input" value="{{ aluno.data_nascimento or '' }}" readonly>
            </div>
            <div class="form-group">
                <label class="form-label">CPF</label>
                <input type="text" class="form-input" value="{{ aluno.cpf or '' }}" readonly>
            </div>
        </div>
        
        <div class="form-row-double">
            <div class="form-group">
                <label class="form-label">RG</label>
                <input type="text" class="form-input" value="{{ aluno.rg or '' }}" readonly>
            </div>
            <div class="form-group">
                <label class="form-label">T√≠tulo de Eleitor</label>
                <input type="text" class="form-input" value="{{ aluno.titulo_eleitor or '' }}" readonly>
            </div>
        </div>
        
        <div class="form-row-triple">
            <div class="form-group">
                <label class="form-label">Se√ß√£o</label>
                <input type="text" class="form-input" value="{{ aluno.secao_eleitor or '' }}" readonly>
            </div>
            <div class="form-group">
                <label class="form-label">Zona Eleitoral</label>
                <input type="text" class="form-input" value="{{ aluno.zona_eleitor or '' }}" readonly>
            </div>
            <div class="form-group">
                <label class="form-label">Munic√≠pio Eleitoral</label>
                <input type="text" class="form-input" value="{{ aluno.municipio_eleitor or '' }}" readonly>
            </div>
        </div>
        
        <div class="select-row">
            <label class="select-label">Sexo</label>
            <select class="select-input" disabled>
                <option>{{ aluno.sexo or 'Selecione' }}</option>
            </select>
            
            <label class="select-label">Estado Civil</label>
            <select class="select-input" disabled>
                <option>{{ aluno.estado_civil or 'Selecione' }}</option>
            </select>
        </div>

        <!-- Informa√ß√µes de Contato -->
        <div class="section-title">
            <span class="icon">üìû</span> Contato
        </div>
        
        <div class="form-row-double">
            <div class="form-group">
                <label class="form-label">Telefone *</label>
                <input type="text" class="form-input" value="{{ aluno.telefone or '' }}" readonly>
            </div>
            <div class="form-group">
                <label class="form-label">Celular</label>
                <input type="text" class="form-input" value="{{ aluno.celular or '' }}" readonly>
            </div>
        </div>
        
        <div class="form-row-double">
            <div class="form-group">
                <label class="form-label">E-mail</label>
                <input type="text" class="form-input" value="{{ aluno.email or '' }}" readonly>
            </div>
            <div class="form-group">
                <label class="form-label">WhatsApp</label>
                <input type="text" class="form-input" value="{{ aluno.whatsapp or '' }}" readonly>
            </div>
        </div>

        <!-- Endere√ßo -->
        <div class="section-title">
            <span class="icon">üè†</span> Endere√ßo
        </div>
        
        <div class="form-row">
            <label class="form-label">Endere√ßo Completo</label>
            <input type="text" class="form-input" value="{{ aluno.endereco or '' }}" readonly>
        </div>
        
        <div class="form-row-double">
            <div class="form-group">
                <label class="form-label">Estado</label>
                <select class="select-input" disabled>
                    <option>{{ aluno.estado or 'Selecione' }}</option>
                </select>
            </div>
        </div>

        <!-- Informa√ß√µes Acad√™micas -->
        <div class="section-title">
            <span class="icon">üéì</span> Academia
        </div>
        
        <div class="select-row">
            <label class="select-label">Atividade *</label>
            <select class="select-input" disabled>
                <option>{{ aluno.atividade or 'Selecione uma atividade' }}</option>
            </select>
        </div>
        
        <div class="select-row">
            <label class="select-label">Turma/Hor√°rio *</label>
            <select class="select-input" disabled>
                <option>{{ aluno.turma or 'Selecione uma turma' }}</option>
            </select>
        </div>
        
        <div class="form-row-double">
            <div class="form-group">
                <label class="form-label">Data de In√≠cio *</label>
                <input type="text" class="form-input" value="{{ aluno.data_cadastro or '' }}" readonly>
            </div>
            <div class="form-group">
                <label class="form-label">Status *</label>
                <div class="form-input" style="border: none; padding: 0;">
                    {% if aluno.status == 'Ativo' %}
                        <span class="status-badge status-ativo">{{ aluno.status }}</span>
                    {% else %}
                        <span class="status-badge status-inativo">{{ aluno.status or 'Inativo' }}</span>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="form-row">
            <label class="form-label">Nome do Respons√°vel</label>
            <input type="text" class="form-input" value="{{ aluno.responsavel or '' }}" readonly>
        </div>
        
        <div class="form-row">
            <label class="form-label">Telefone do Respons√°vel</label>
            <input type="text" class="form-input" value="{{ aluno.telefone_responsavel or '' }}" readonly>
        </div>
        
        <div class="form-row">
            <label class="form-label">Indica√ß√£o</label>
            <input type="text" class="form-input" value="{{ aluno.indicacao or '' }}" readonly>
        </div>
        
        <div class="form-row">
            <label class="form-label">Observa√ß√µes</label>
            <input type="text" class="form-input" value="{{ aluno.observacoes or '' }}" readonly>
        </div>
    </div>

    <script>
        function imprimirFicha() {
            // Garantir que a p√°gina est√° totalmente carregada
            if (document.readyState !== 'complete') {
                window.addEventListener('load', function() {
                    setTimeout(function() {
                        window.print();
                    }, 500);
                });
            } else {
                // Pequeno delay para garantir renderiza√ß√£o
                setTimeout(function() {
                    window.print();
                }, 100);
            }
        }
        
        // Atalho de teclado para impress√£o (Ctrl+P)
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'p') {
                e.preventDefault();
                imprimirFicha();
            }
        });
        
        // Garantir que imagens estejam carregadas antes da impress√£o
        window.addEventListener('beforeprint', function() {
            var images = document.querySelectorAll('img');
            var loadedImages = 0;
            var totalImages = images.length;
            
            if (totalImages === 0) return;
            
            images.forEach(function(img) {
                if (img.complete) {
                    loadedImages++;
                } else {
                    img.addEventListener('load', function() {
                        loadedImages++;
                    });
                    img.addEventListener('error', function() {
                        loadedImages++;
                    });
                }
            });
        });
    </script>
</body>
</html>
